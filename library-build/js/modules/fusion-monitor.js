define(["physicsjs"],function(e){var t=e.query({charge:0}),n=e.query({charge:1});e.behavior("fusion-monitor",function(e){return{init:function(t){e.init.call(this,t)},connect:function(e){e.on("collisions:detected",this.handleCollisions,this,100)},disconnect:function(e){e.off("collisions:detected",this.handleCollisions)},checkFusion:function(e,t){var n=this,r;if(e.ptype==="proton"&&t.ptype==="proton"){e.ptype="neutron",t.ptype="helium",e.state.vel.mult(20),t.state.vel.mult(20),this._world.emit("fusion",{name:"He",members:[e,t]});return}},handleCollisions:function(e){var t=e.collisions,n;for(var r=0,i=t.length;r<i;r++)n=t[r],n.bodyA.name==="particle"&&n.bodyB.name==="particle"&&this.checkFusion(n.bodyA,n.bodyB)}}})});